{% extends "base.html" %}
{% block title %}Your Report{% endblock %}
{% block content %}
    <h1 class="mb-4 text-dark">Your Evaluation Report</h1>
    <div class="card shadow-lg border-success card-shadow">
        <div class="card-header bg-success text-white fw-bold fs-5">Submission Result</div>
        <div class="card-body p-4">
            <p class="lead mb-1">Student: <strong>{{ submission.student_name }}</strong></p>
            <p class="text-muted">Question: <strong>{{ key_answer.question_text }}</strong></p>
            
            <hr class="my-4">
            
            <div class="text-center">
                <h2 class="display-1 fw-bold text-success">{{ submission.score|floatformat:1 }}</h2>
                <p class="fs-4 text-dark">OUT OF {{ key_answer.max_marks }} MARKS</p>
            </div>
            
            <hr class="my-4">
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <h4 class="mb-3 fw-bold text-dark">1. Your Submitted Answer Image</h4>
                    <div class="card card-body bg-light text-center p-2">
                        <img src="{{ image_url }}" class="img-fluid border" alt="Submitted Handwritten Answer" style="max-height: 250px; width: auto; display: block; margin: 0 auto;">
                        <p class="small text-muted mt-2">This is the image the AI processed.</p>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <h4 class="mb-3 fw-bold text-dark">2. AI's Recognized Text</h4>
                    <div class="alert alert-secondary border-secondary h-100" style="overflow-y: auto;">
                        <p class="small text-muted">The AI converted your handwriting to this digital text:</p>
                        <pre class="mb-0 small text-wrap">{{ extracted_text }}</pre>
                    </div>
                </div>
            </div>
            
            <hr class="my-4">

            <h4 class="mb-3 fw-bold text-dark">Personalized Feedback:</h4>
            <div class="alert alert-warning border-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                {{ submission.feedback|linebreaks }}
            </div>
        </div>
    </div>

    <div class="mt-4 text-center">
        <a href="{% url 'student_check_results' %}" class="btn btn-secondary btn-lg">Check Another Result</a>
    </div>
{% endblock %}